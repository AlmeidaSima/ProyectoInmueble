<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Listado de Usuarios</title>
<!-- Agregar Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div th:replace="~{navbar}"></div>
    <div class="container mt-4">
        <h1 class="mb-4">Listado de Usuarios</h1>
        <a href="/user/agregar" class="btn btn-primary mb-3">Agregar Usuario</a>
        <table class="table table-striped table-hover">
            <thead class="table-dark">
                <tr>
                    <th>ID</th>
                    <th>Nombre</th>
                    <th>Apellido</th>
                    <th>Correo</th>
                    <th>Celular</th>
                    <th>Tipo</th>
                    <th>Veces Alquil칩</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="usuario : ${usuarios}">
                    <td th:text="${usuario.idUsuario}"></td>
                    <td th:text="${usuario.UsuNomb}"></td>
                    <td th:text="${usuario.UsuApe}"></td>
                    <td th:text="${usuario.UsuCorreo}"></td>
                    <td th:text="${usuario.UsuCelular}"></td>
                    <td th:text="${usuario.UsuTipo}"></td>
                    <td th:text="${usuario.VecesAlquilo}"></td>
                    <td>
                        <a th:href="@{/user/editar/{id}(id=${usuario.idUsuario})}" class="btn btn-warning">Editar</a>
                        <a th:href="@{/user/eliminar/{id}(id=${usuario.idUsuario})}" class="btn btn-danger">Eliminar</a>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <script>
        // Comprueba si la variable 'usuarios' est치 disponible
        console.log("Comprobando usuarios:");
        console.log("Usuarios:", /*[[${usuarios}]]*/ []);

        // Detecta clics en los botones de acci칩n
        document.addEventListener("DOMContentLoaded", () => {
            console.log("La p치gina ha cargado correctamente.");
            
            const botonesEditar = document.querySelectorAll("a.btn-warning");
            const botonesEliminar = document.querySelectorAll("a.btn-danger");

            botonesEditar.forEach((boton) => {
                boton.addEventListener("click", (e) => {
                    console.log("Se hizo clic en Editar para el usuario con ID:", e.target.closest("a").getAttribute("href"));
                });
            });

            botonesEliminar.forEach((boton) => {
                boton.addEventListener("click", (e) => {
                    console.log("Se hizo clic en Eliminar para el usuario con ID:", e.target.closest("a").getAttribute("href"));
                });
            });
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
